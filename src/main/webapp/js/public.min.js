function verify(e,t,n){function o(e){i(),null===s.target?r.parent().append(e):s.target.append(e)}function i(){if(null!==s.target)s.target.find(".note.error-txt").remove(),s.target.find(".note.success-txt").remove();else{var e=r.siblings(".note.error-txt"),t=r.siblings(".note.success-txt");e.remove(),t.remove()}}function a(e){return!0===s.successhint&&(i(),null===s.target?(r.parent().find(".note.success-txt").remove(),r.parent().append(e)):(s.target.find(".note.success-txt").remove(),s.target.append(e))),null!==s.callback?s.callback(l,t):[!0,l]}var s=$.extend({note:"该项为必填项",minlength:null,maxlength:null,valelem:null,target:null,tagname:"span",successhint:!0,callback:null},n),r=$(e);if(null!==s.valelem)if("radio"==r.first().attr("type")||"checkbox"==r.first().attr("type"))var l=$(e+":checked").val();else l=$.trim(s.valelem.val());else if("radio"==r.first().attr("type")||"checkbox"==r.first().attr("type"))l=$(e+":checked").val();else l=$.trim(r.val());var c="<"+s.tagname+' class="note error-txt">'+s.note+"</"+s.tagname+">",p="<"+s.tagname+' class="note success-txt"><i class="icon icon-success"></i></'+s.tagname+">";if("file"==r.attr("type")?r.bind("click",function(){i()}):r.bind("focus",function(){i()}),l&&"null"!==l){if(null!==s.minlength&&null!==s.maxlength){if("number"!=typeof s.minlength&&"number"!=typeof s.minlength)return new TypeError;if((u=$.trim(r.val())).length<s.minlength){c="<"+s.tagname+' class="note error-txt"><i class="icon icon-warn"></i>字段长度最少'+s.minlength+"个字符</"+s.tagname+">";return t.preventDefault(),o(c),!1}if(u.length>s.maxlength){c="<"+s.tagname+' class="note error-txt"><i class="icon icon-warn"></i>字段长度超过'+s.maxlength+"个字符</"+s.tagname+">";return t.preventDefault(),o(c),!1}return a(p)}if(null!==s.minlength){if("number"!=typeof s.minlength)return new TypeError;var u=$.trim(r.val());c="<"+s.tagname+' class="note error-txt"><i class="icon icon-warn"></i>字段长度最少'+s.minlength+"个字符</"+s.tagname+">";if(u.length<s.minlength)return t.preventDefault(),o(c),!1;if(null!==s.maxlength){if("number"!=typeof s.maxlength)return new TypeError;u=$.trim(r.val()),c="<"+s.tagname+' class="note error-txt"><i class="icon icon-warn"></i>字段长度超过'+s.maxlength+"个字符</"+s.tagname+">";return u.length>s.maxlength?(t.preventDefault(),o(c),!1):a(p)}return a(p)}if(null!==s.maxlength){if("number"!=typeof s.maxlength)return new TypeError;u=$.trim(r.val()),c="<"+s.tagname+' class="note error-txt"><i class="icon icon-warn"></i>字段长度超过'+s.maxlength+"个字符</"+s.tagname+">";if(u.length>s.maxlength)return t.preventDefault(),o(c),!1;if(null!==s.minlength){if("number"!=typeof s.minlength)return new TypeError;u=$.trim(r.val()),c="<"+s.tagname+' class="note error-txt"><i class="icon icon-warn"></i>字段长度最少'+s.minlength+"个字符</"+s.tagname+">";return u.length<s.minlength?(t.preventDefault(),o(c),!1):a(p)}return a(p)}return a(p)}return t.preventDefault(),i(),o(null===s.note?"<"+s.tagname+' class="note error-txt">该项为必填项</'+s.tagname+">":c),!1}!function(e){e.fn.popupshow=function(t){function n(){var t=e("html"),n=t.attr("style");return t.css({overflow:"hidden"}),n}function o(){var t=e("#"+d);if(t.length>0){if(t.is(":visible"))return;t.show().css({zIndex:h})}else{var n=e("<div class='passport-mask' id='"+d+"'>");e("body").append(n),n.show().css({zIndex:h})}}function i(){e("body").find('[popup="show"]').attr("popup","hide").find(".close").click()}function a(t,n){function o(){null!==n?s.find(n).text(i+"秒"):(s.find("."+$[0].className).remove(),s.children(".wrap").append($).find($).text(i+"秒"))}if("number"!=typeof t||t<=1)throw new Error("参数类型错误或小于等于1");var i=Math.ceil(t-1),s=e("#"+c);o(),window.clearTimeout(this._t),this._t=window.setTimeout(function(){if(i>1)return o(),a(i,n);e("#"+c+" .close").click()},1e3)}function s(t,n){window.clearTimeout(this._t),!0===f&&(void 0==n?e("html").removeAttr("style"):e("html").attr("style",n)),null!==k&&(document.location=k);var o=t.parents("#"+c),i=o.attr("popmark");o.attr("popup","hide"),"own"==i?o.hide():o.remove(),null!==l.callback&&l.callback()}function r(t,n){var o=e("#"+t),i=e(window),a=i.width(),s=i.height(),r=o.width(),l=o.height(),c=i.scrollTop(),p=i.scrollLeft();if(l>s){var u=c,d=(a-r)/2+p;o.css({position:"absolute",top:u,left:d,margin:0})}else if("fixed"==n){u=(s-l)/2,d=(a-r)/2;o.css({position:"fixed",top:u,left:d,margin:0})}else if("absolute"==n){u=(s-l)/2+c,d=(a-r)/2+p;o.css({position:"absolute",top:u,left:d,margin:0})}}var l=e.extend({popupId:null,url:null,string:null,maskId:"mask",position:"fixed",noscroll:!1,zindex:null,width:null,height:null,countdown:null,timer:null,jump:null,fn:null,callback:null},t);if(!l.popupId)return!1;var c=l.popupId,p=l.url,u=l.string,d=l.maskId,m=l.position,f=l.noscroll,h=l.zindex,v=l.width,g=l.height,w=l.countdown,b=l.timer,k=l.jump,x=e("#"+c),$=e('<div class="countdownTxt">');if(x.length>0){if(x.is(":visible"))return;if(i(),null!==d&&o(),x.attr({popup:"show",popmark:"own"}).show(),!0===f)var _=n();if(null!==v&&x.css("width",v+"px"),null!==g&&x.css("height",g+"px"),null!==h)x.css({zIndex:Number(h)+1});else{var y=e("#"+d).css("z-index");x.css({zIndex:Number(y)+1})}r(c,m),e("#"+c+" .close").bind("click",function(){s(e(this),_),e("#"+d).hide()}),null!==l.fn&&l.fn(),null!==w&&a(w,b)}else if(null!==u){if(e("body").find("#"+c).length)return;i(),null!==d&&o(),e("body").append(u);if((x=e("#"+c)).attr("popup","show").show(),!0===f)_=n();if(null!==v&&x.css("width",v+"px"),null!==g&&x.css("height",g+"px"),null!==h)x.css({zIndex:Number(h)+1});else{y=e("#"+d).css("z-index");x.css({zIndex:Number(y)+1})}r(c,m),e("#"+c+" .close").bind("click",function(){s(e(this),_),e("#"+d).hide()}),null!==l.fn&&l.fn(),null!==w&&a(w,b)}else{if(null===p)return!1;e.ajax({type:"GET",url:p,success:function(t){if(!e("body").find("#"+c).length){i(),null!==d&&o(),e("body").append(t);var p=e("#"+c);if(p.attr("popup","show").show(),!0===f)var u=n();if(null!==v&&p.css("width",v+"px"),null!==g&&p.css("height",g+"px"),null!==h)p.css({zIndex:Number(h)+1});else{var k=e("#"+d).css("z-index");p.css({zIndex:Number(k)+1})}r(c,m),e("#"+c+" .close").bind("click",function(){s(e(this),u),e("#"+d).hide()}),null!==l.fn&&l.fn(),null!==w&&a(w,b)}}})}e(window).resize(function(){r(c,m)})}}(jQuery);var JIUYE={init:function(){this.bindEle(),this.popup(),this.tipsClose(".tips-notice"),$(".progress").each(function(){JIUYE.progress($(this)),JIUYE.markSlice($(this))}),this.faqDrop(".faq-item")},bindEle:function(){$("#inforPop").bind("click",this.priceHint),$("#user-name,.user-center,#user-name p").bind("mouseover",this.userContent),$("#closeTime").on("click",this.setCloseCookie)},priceHint:function(){return $(this).popupshow({popupId:"priceHint"}),!1},userContent:function(){$(".user-center").show(),$(".jiaotou").addClass("rotate"),JIUYE.stopEventBubble(),$(document).bind("mouseover",function(){$(".user-center").hide(),$(".jiaotou").removeClass("rotate")})},stopEventBubble:function(){function e(){if(window.event)return window.event;for(func=e.caller;null!=func;){var t=func.arguments[0];if(t&&(t.constructor==Event||t.constructor==MouseEvent||t.constructor==KeyboardEvent||"object"==typeof t&&t.preventDefault&&t.stopPropagation))return t;func=func.caller}return null}var t=e();window.event?t.cancelBubble=!0:t.preventDefault&&t.stopPropagation()},loading:function(){for(var e=$('<div class="loading"></div>'),t='<div class="spinner">',n=1;n<=5;n++)t+='<div class="rect'+n+'"></div>\n';return t+='</div><div class="text">内容加载中...</div>',e.append(t),e},popup:function(){$(".js-tuifei").bind("click",function(){return $(this).popupshow({popupId:"pop-tuifei"}),!1}),$(".js-task").bind("click",function(){$("#homework_info").html("");var e=$(this).parents("article");if(!e.attr("id"))throw new Error("id 不存在或为空");var t=e.attr("attr"),n={};return n.job_id=$("#job_id").val(),n.path_id=$("#path_id").val(),n.task_id=$("#task_id").val(),n.class_id=$("#class_id").val(),n.period=$("#period").val(),n.homework_id=t,$.ajax({url:"/task/user_homework_info",type:"post",data:n,dataType:"json",success:function(e){var t="";e.can_submit_times<=3&&2==e.as_remind_times?(t+="提示 ：你还剩下 <span>"+e.can_submit_times+"</span>次作业批改机会",$("#homework_info").html(t)):1==e.as_remind_times&&(t+="提示 ：本次提交之后会自动锁定，直到老师批改完毕",$("#homework_info").html(t))},err:function(){}}),$(this).popupshow({popupId:"pop-task",fn:function(){$(".sc-btn").unbind("click"),$(".sc-btn").bind("click",JIUYE.uploadFile),$("#submitTask").unbind("click"),$("#submitTask").bind("click",function(e){JIUYE.submitTask(e,t)})},callback:function(){$("#formTask").find(".note.error-txt").remove(),$("#formTask").find("input, textarea").val(""),$("#formTask").find(".sc-txt").text("只能传"+ext+"格式文件，大小不得超过"+confHomework.maxSize+"MB")}}),!1}),$(".js-shenpi").bind("click",function(){var e={answers_id:$(this).attr("answers_id")};return $(this).popupshow({popupId:"pop-shenpi",fn:function(){$("#taskmainvideo").length&&videojs("taskmainvideo").pause(),$.ajax({type:"post",url:"/task/dianping",data:e,dataType:"json",success:function(e){var t="";e.teacher_video_url&&(t+='<div class="videobox">',t+='<video id="shenpivideo" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="autoplay" width="600" height="344" poster="/Current/home/images/play_bg.jpg" data-setup="{}">',t+='<source src="'+e.teacher_video_url+'" type="video/mp4" /> ',t+='<p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>',t+="</video>",t+="</div>"),t+='<div class="teacher-comments">',t+="<p>",t+="<strong>老师点评："+e.score+"分</strong><br/>",e.teacher_message&&(t+=e.teacher_message+"</p> "),t+="</p> ",t+="</div>",$("#pop-shenpi .teacher-video").html(t);$("#pop-shenpi .teacher-video .videobox").length||$("#pop-shenpi .teacher-video .teacher-comments").css({height:290})}})},callback:function(){$("#shenpivideo").length&&videojs("shenpivideo").pause(),$("#pop-shenpi .teacher-video").html("")}}),!1}),$(".js-tasktips").bind("click",function(){var e={homework_id:$(this).attr("homework_id")};return $(this).popupshow({popupId:"pop-tasktips",fn:function(){$("#pop-tasktips .teacher-comments").html(JIUYE.loading()),$.ajax({type:"post",url:"/task/tips",data:e,dataType:"json",success:function(e){if(e.intro)var t="<p><strong>作业提示：</strong><br/>"+e.intro+"</p>";else t="<p><strong>作业提示：</strong><br/>好好努力，暂无作业提示</p>";$("#pop-tasktips .teacher-comments").html(t)}})},callback:function(){$("#pop-tasktips .teacher-comments p").html("")}}),!1}),$(".js-explainvideo").bind("click",function(){var e={homework_id:$(this).attr("homework_id")};return $(this).popupshow({popupId:"pop-explainvideo",fn:function(){$("#taskmainvideo").length&&videojs("taskmainvideo").pause(),$("#pop-explainvideo .videobox").html(JIUYE.loading()),$.ajax({type:"post",url:"/task/tips",data:e,dataType:"json",success:function(e){if(e.video){var t="";t+='<video id="explainvideo" class="video-js vjs-default-skin vjs-big-play-centered" controls preload="autoplay" width="600" height="344" poster="/Current/home/images/play_bg.jpg" data-setup="{}">',t+="<source src="+e.video+' type="video/mp4" />',t+='<p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>',t+="</video>"}else t="暂无视频讲解";$("#pop-explainvideo .videobox").html(t)}})},callback:function(){$("#explainvideo").length&&(videojs("explainvideo").pause(),$("#pop-explainvideo .videobox").html(""))}}),!1})},uploadFile:function(){$("input[name='homework_url']").change(function(){var e=/[^\\]+[\.]+\w+$/.exec($(this).val());""!=e&&$(".sc-txt").html(e)})},tipsClose:function(e){$(e+" .tips-close").bind("click",function(){$(this).parent(e).fadeOut(500,function(){$(this).remove()})})},setCloseCookie:function(){var e=new Date,t=e.getTime(),n=864e5-(t-(new Date(e.toLocaleDateString()).getTime()-1)),o=new Date;o.setTime(n+t),document.cookie="user_archives_notice=close;expires="+o.toUTCString()},progress:function(e){var t=e.attr("data-progress"),n=e.find(".progress-fast"),o=e.find(".progress-plan"),i=e.find(".progress-now"),a=t.split(",")[0],s=t.split(",")[1],r=t.split(",")[2];e.find(".progress-bar").width();TweenMax.to(n,.2,{width:a+"%",onComplete:function(){TweenMax.to(o,.2,{width:s+"%",onComplete:function(){TweenMax.to(i,.2,{width:r+"%",onComplete:function(){i.find(".tooltip").stop(!0,!0).fadeIn(200),e.find('.progress-bar>div:not(".progress-now") .dot').hover(function(){var e=Math.round($(this).position().left),t=i.find(".dot"),n=Math.round(t.position().left);(e-n<100||e-n<-100)&&i.find(".tooltip").stop(!0,!0).fadeOut(200),$(this).parent().find(".tooltip").stop(!0,!0).fadeIn(200)},function(){$(this).parent().find(".tooltip").stop(!0,!0).fadeOut(200),i.find(".tooltip").stop(!0,!0).fadeIn(200)})},ease:Expo.easeOut})},ease:Expo.easeOut})},ease:Expo.easeOut})},submitTask:function(e,t){function n(e){e.message=encodeURIComponent(e.message),$.ajaxFileUpload({url:"/task/subWork/",secureuri:!1,fileElementId:"taskUpload",data:e,dataType:"json",success:function(e){"sus"==e.tip?(JKXY.msgBox(1,e.msg,3e3),$("#formTask").find(".note.error-txt").remove(),$("#formTask").find("input, textarea").val(""),$("#formTask").find(".sc-txt").text("只能传"+ext+"格式文件，大小不得超过"+confHomework.maxSize+"MB"),$("#pop-task .close").click(),"undefined"!=typeof stat&&stat.efunc({pa:3,pc:5.3,po:79017,jZy:t,jZyS:1}),document.location.reload()):(JKXY.msgBox(0,e.msg,3e3),"undefined"!=typeof stat&&stat.efunc({pa:3,pc:5.3,po:79017,jZy:t,jZyS:0}),$("#formTask").find(".note.error-txt").remove())},error:function(e){"undefined"!=typeof stat&&stat.efunc({pa:3,pc:5.3,po:79017,jZy:t,jZyS:0}),e.msg?JKXY.msgBox(0,e.msg,3e3):JKXY.msgBox(0,"只能传"+ext+"格式文件，大小不得超过"+confHomework.maxSize+"MB",3e3)}})}"undefined"!=typeof stat&&stat.efunc({pa:3,pc:5.1,po:79015,jZy:t});var o=verify("#taskUpload",e,{note:"请选择要上传的作业",successhint:!1,target:$("#taskUpload").parents(".sc-content")}),i=$("#taskContent").val();if(!i)return JKXY.msgBox(0,"还是说点什么吧！",600),!1;var a=verify("#taskContent",e,{note:"",minlength:5,maxlength:1e3,successhint:!1,tagname:"div"}),s={};s.homework_id=t,1==o[0]&&(s.job_id=$("#job_id").val(),s.path_id=$("#path_id").val(),s.task_id=$("#task_id").val(),s.class_id=$("#class_id").val(),s.period=$("#period").val(),i?1==a[0]&&(s.message=a[1],n(s),$("#submitTask").addClass("disabled"),$("#submitTask").unbind("click")):(n(s),$("#submitTask").addClass("disabled"),$("#submitTask").unbind("click")))},canvasSize:function(){$("canvas").attr({width:260,height:260})},markSlice:function(e){var t=e.attr("data-mark"),n=e.find(".progress-mark li"),o=t%4,i=Math.floor(t/4);o>2&&(i+=1),e.find(".progress-mark li:not(:last)").each(function(e){$(this).text(e*i)}),n.last().text(t)},timermask:function(e,t,n){var o='<div class="showtimemask '+t+" "+n+'">STOP</div>';e.find(".showtimemask").remove(),e.append(o)},faqDrop:function(e){var t,n,o=this,i=$(e),a=i.children("dt"),s=document.location.hostname;a.bind("click",function(){var e=$(this).parent("dl");t=e.attr("id"),n=e.attr("data-id"),e.hasClass("active")?e.removeClass("active"):(i.removeClass("active"),e.addClass("active"),o.setUrl(s,t,n))})},setUrl:function(e,t,n){if(void 0!=t&&void 0!=n){var o=window.location.protocol+"//"+e+"/faq/"+n;window.history&&history.pushState?history.pushState(null,null,o):window.location.href=o}}};JIUYE.showTimes=function(e,t,n){this.startTime=Date.parse(e),this.lastTime=Date.parse(t),this.step=1e3*n},JIUYE.showTimes.prototype={atTime:function(e,t){var n=this,o=parseFloat(Number(n.lastTime)-Number(n.startTime))/864e5,i=Math.floor(o),a=24*(o-i),s=Math.floor(a),r=60*(a-s),l=Math.floor(60*(a-s)),c=Math.round(60*(r-l)),p=10*Math.ceil(Math.round(1e3*(60*(r-l)-c))/100);100==p&&(p=99),n.startTime>=n.lastTime?arguments[0]():(arguments[1](n.getStr(i),n.getStr(s),n.getStr(l),n.getStr(c),n.getStr(p)),n.startTime=parseInt(n.startTime)+n.step,window.setTimeout(function(){n.atTime(e,t)},n.step))},getStr:function(e){return e.toString().length<2?"0"+e:e}},$(function(){JIUYE.init()});var JKXY=JKXY||{};JKXY.msgBox=function(e,t,n,o){t=t||"亲爱的VIP，这是来自极客学院小雪的 Hello~";var i="warning";n=parseInt(n)?parseInt(n):1500;switch(e){case 1:var a="waring-success";break;case 0:a="waring-failure";break;case 2:default:a="waring-sub"}var s;s='<div class="web-dia-tip '+a+'" id="'+i+'" >',s+=t,s+="</div>",$("body").append(s);var r=$("#"+i).width()/2;$("#"+i).css("marginLeft",-r),$("#"+i).animate({top:"0px",opacity:1},300,function(){$("#"+i).delay(n).animate({top:"-50px",opacity:0},500,function(){$("#"+i).remove(),"function"==typeof o&&o()})})};var uname,code,uid,protocol="https:"==document.location.protocol?"https://":"http://",domain={domain:function(e){var t=RegExp(protocol+"([^/]+)/","i"),n=e.match(t);return n=n[1],d_arr=n.split("."),n=d_arr[d_arr.length-2]+"."+d_arr[d_arr.length-1]},domain_pre:function(e){var t=RegExp(protocol+"([^/]+)/","i"),n=e.match(t);return n=n[1],d_arr=n.split("."),d_arr[0]},domain_arr:function(e){var t=RegExp(protocol+"([^/]+)/","i"),n=e.match(t);return n=n[1],d_arr=n.split("."),d_arr},currentUrl:window.location.href},host_arr=domain.domain_arr(window.location.href),baseUrl=(protocol=window.location.protocol,host_arr[1]+"."+host_arr[2]),passportUrl=protocol+"//passport."+baseUrl,wwwUrl=protocol+"//www."+baseUrl,jiuyeUrl=protocol+"//jiuye."+baseUrl,myUrl=protocol+"//my."+baseUrl,safeCodeUrl=passportUrl+"/sso/verify",passportUrlFix=host_arr[1]+"."+host_arr[2],qq_login_url=passportUrl+"/connect/qq",wx_login_url=passportUrl+"/connect/weixin",weibo_login_url=passportUrl+"/connect/weibo",eoe_login_url=passportUrl+"/connect/eoe",event_stop={rightdia:!1,usercare:!1},pub_url="static/",www_url=wwwUrl,jiuye_url=jiuyeUrl,my_url=myUrl,reg=(qq_login_url=passportUrl+"/connect/qq",wx_login_url=passportUrl+"/connect/weixin",weibo_login_url=passportUrl+"/connect/weibo",eoe_login_url=passportUrl+"/connect/eoe",new RegExp("(^| )uname=([^;]*)(;|$)"));document.cookie.match(reg)&&document.cookie.match(reg)[2]&&(uname=decodeURI(document.cookie.match(reg)[2])),reg=new RegExp("(^| )code=([^;]*)(;|$)"),document.cookie.match(reg)&&document.cookie.match(reg)[2]&&(code=decodeURI(document.cookie.match(reg)[2])),reg=new RegExp("(^| )uid=([^;]*)(;|$)"),document.cookie.match(reg)&&document.cookie.match(reg)[2]&&(uid=document.cookie.match(reg)[2]);var isLogin=!!uname,login={login:'<span><a href="javascript:void(0);" class="diaLoginBtn" activity="activity" postion="event_index_header" rel="nofollow">登录</a></span><em>|</em><span><a href="javascript:void(0);" class="diaRegBtn" activity="activity" postion="event_index_header" rel="nofollow">注册</a></span>',info:'<div class="greencolor relative user-name" id="user-name"><p><a href="'+www_url+'/member/" id="login-user">'+uname+'</a><img src="img/jiaotou.png"class="jiaotou"></p><div class="user-center absolute"><img src="img/abc.png" class="sj-icon absolute"><div><a href="'+jiuye_url+'/myclass">我的就业班</a><a href="'+passportUrl+'/submit/logout">退出</a></div></div></div>'};isLogin?$(".loginbox_event").html(login.info):$(".loginbox_event").html(login.login),$(function(){$(".signUp").on("click",function(){if(isLogin){var e=$(".signUp").attr("class_id");window.open("/enroll/signup?class_id="+e,"_blank")}else $(this).addClass("loginnow")})});