<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>账号设置_消息通知-骇客学院</title>
    <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="css/index.min.css">
    <script type="text/javascript" src="js/growingio.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/mask.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/jquery.min.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/header.min.js?t=1544581681296"></script>
    <script type="text/javascript" src="js/web_socket.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/websocket.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/vue2.5.13.min.js"></script>
    <script type="text/javascript" src="js/axios0.18.0.min.js"></script>
    <script type="text/javascript" src="js/vue-resource.js"></script>
</head>

<body>
    <div id="header_top_notice"></div>
    <div id="jk-header">
        <div class="header">
            <h1>
                <a href="index.html" class="logo">
                    <img src="img/logo.png?t=1513326254000" width="100" alt="骇客学院" />
                </a>
            </h1>
            <nav style="width:490px;">
                <ul>
                    <li>
                        <a href="index.html" class="home">首页</a>
                    </li>
                    <li class="careerpath">
                        <a href="javascript:void(0)">职业</a><i class="slide-icon"></i>
                        <div class="zhiye-submenu slide-submeu">
                        </div>
                    </li>
                    <li>
                        <a href="javascript:void(0)">课程</a><i class="slide-icon"></i>
                        <div class="slide-submeu">
                            <a href="javascript:void(0)">免费</a>
                            <a href="javascript:void(0)">VIP</a>
                        </div>
                    </li>
                    <li>
                        <a href="javascript:void(0)">企业</a><i class="slide-icon"></i>
                        <div class="slide-submeu qy-box">
                        </div>
                    </li>
                    <li>
                        <a href="javascript:void(0)">社区</a><i class="slide-icon"></i>
                        <div class="slide-submeu">
                            <a href="art.html">技术问答</a>
                        </div>

                    </li>
                </ul>
            </nav>
            <div class="nav-other">
                <div id="y-login">
                    <div class="centerbox" style="display: inline-block;">
                        <a href="ke_doing.html" class="learn-center" title="学习中心"></a>
                    </div>
                    <div class="centerbox" style="display: inline-block;">
                        <a href="" class="message" id="message" title="消息中心">
                            <i class="have" id="have" style="display: none;"></i>
                        </a>
                    </div>
                    <span class="userinfo-login" id="userinfo-login" style="display: inline-block;">
                        <a href="setting_user.html">
                            <img src="https://assets.jikexueyuan.com/user/avtar/default.gif" id="userpoto">
                        </a>
                        <i id="uservip-icon"></i>
                        <div class="slide-submeu user-slide">
                            <a href="ke_doing.html"><i class="learningcenter-icon"></i>学习中心</a>
                            <a href="learn_center.html"><i class="homepage-icon"></i>个人主页</a>
                            <a href="setting_user.html"><i class="set-icon"></i>账号设置</a>
                            <a href="user/logout?path=index"><i class="exit-icon"></i>退出登录</a>
                        </div>
                    </span>
                </div>
                <div id="n-login">
                    <span class="userinfo-notlogin">
                        <a href="Login.html">登录</a><i></i>
                        <a href="Register.html">注册</a>
                    </span>
                </div>
            </div>
        </div>
    </div>

    <div class="wrapper">

        <nav class="leftnav" id="leftNav">
            <ul>
                <li><a href="setting_user.html" class="">个人资料</a></li>
                <li id="setting_ca">
                    <!--认证学员-->
                </li>
                <li><a href="setting_vip.html" class="">我的VIP</a></li>
                <!--<li><a href="setting_pro.html" class="">我的Pro</a></li>
                <li><a href="setting_order.html" class="">我的订单</a></li>-->
                <li><a href="setting_jkb.html" class="">我的骇客币</a></li>
                <!--<li><a href="setting_quan.html" class="">我的优惠券</a></li>-->
                <li><a href="security.html" class="">账号安全</a></li>
                <li><a href="setting_message.html" class="active">消息设置</a></li>
                <!--<li><a href="setting_sns.html" class="">绑定第三方账号</a></li>-->
            </ul>
        </nav>

        <div class="main">
            <h2>消息设置</h2>
            <section class="notify">
                <form id="notifyForm" method="post" action="">
                    <!-- 未绑定 -->
                    <h3>微信通知</h3>
                    <p class="notify-explain">每当有与你有关的新动态，系统会给微信推送消息</p>
                    <p class="notify-notyet">你尚未绑定微信服务号，扫描下方的二维码，并关注完成绑定：</p>
                    <img src="https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=gQE98TwAAAAAAAAAAS5odHRwOi8vd2VpeGluLnFxLmNvbS9xLzAycFF5MmNDZGpkUDMxR3hEcDFzMXAAAgShvpFcAwQA6QcA" width="150px">
                    <div class="popup" id="notifyPop" style="display: none;">
                        <header>
                            <h2>解绑确认</h2>
                            <i class="close popclose"></i>
                        </header>
                        <div class="wrap">
                            <p class="notify-popp">解绑之后将无法再收到微信消息通知，确定解绑？</p>
                            <div class="notify-btns cf">
                                <button class="green-btn" id="notifyConfirm">确定</button>
                                <button class="cancel-btn popclose">取消</button>
                            </div>
                        </div>
                    </div>
                    <h3 class="notify-msg">短信通知</h3>
                    <p class="notify-yet">当与你有关的「重要」动态，系统会给你手机发送短信</p>
                    <label for="sms-notifyOpen">
                        <input type="radio" name="sms-notifyradio" checked="checked" id="sms-notifyOpen" value="1"><span class="notify-circle"><i></i></span><span class="notify-label">开启</span>
                    </label>
                    <label for="sms-notifyClose">
                        <input type="radio" name="sms-notifyradio" id="sms-notifyClose" value="-1"><span class="notify-circle"><i></i></span><span class="notify-label">关闭</span>
                    </label>
                    <button class="green-btn" type="submit" id="notifySave">保存</button>
                </form>
            </section>
        </div>

    </div>

</body>


<script>
    window.IS_SELF = 0;

</script>
<script src="js/jquery.min.js"></script>
<!-- 我的订单JS -->
<script src="js/index.js"></script>
<script src="js/common.js"></script>
<script>
    var V6JKXY = {};
    V6JKXY.msgBox = function(status, msg, show_time, callBack) {
        var msg = msg ? msg : '亲爱的VIP，这是来自骇客学院小雪的 Hello~';
        var id = "warning";
        var show_time = parseInt(show_time) ? parseInt(show_time) : 1000;
        switch (status) {
            case 1:
                var color_class = "waring-success";
                break;
            case 0:
                var color_class = "waring-failure";
                break;
            case 2:
            default:
                var color_class = "waring-sub";
                break;
        }
        $('#' + id).remove();
        var html;
        html = '<div class="web-dia-tip ' + color_class + '" id="' + id + '" >';
        html += msg;
        html += '</div>';
        $('body').append(html);

        var _W = $('#' + id).width() / 2;
        $('#' + id).css("marginLeft", -_W);
        $('#' + id).stop().animate({
            top: "0px",
            opacity: 1
        }, 300, function() {
            $('#' + id).delay(show_time).animate({
                top: "-50px",
                opacity: 0
            }, 500, function() {
                $('#' + id).remove();
                if (typeof(callBack) == 'function') {
                    callBack();
                }
            });
        });
    };

    $('#notifySave').on('click', function(e) {
        e.preventDefault();
        V6JKXY.msgBox(1, '保存成功', 500, function() {
            $('#notifyForm').submit();
        });
    });

    //监听微信扫码
    function monitorWxScan() {
        $.ajax({
            type: "POST",
            url: "/api/getMessageWxIsBind",
            dataType: "json",
            timeout: 20000,
            data: {
                ajax: "1",
                time: "10000"
            },
            success: function(result, textStatus) {
                if (result.data.isBind == true) {
                    window.location.reload();
                } else {
                    monitorWxScan();
                }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                monitorWxScan();
            }
        });
    }
    var isBind = '';
    if (!isBind) monitorWxScan();

</script>
<link rel="stylesheet" href="css/footer.css?t=1513326254000" />
<div id="footer">
    <div class="footer-content">
        <div class="contact-way">
            <div class="other-way">
                <a href="//blog.jikexueyuan.com/28.html " target="_blank" class="weixin-icon"></a>
                <!--<a href="" class="tencen-icon"></a>-->
                <a href="//weibo.com/jikexueyuan" target="_blank" class="sina-icon"></a>
                <a href="//twitter.com/jikexueyuan" target="_blank" class="facebook-icon"></a>
                <a href="//plus.google.com/communities/117673330839635588089" target="_blank" class="google-icon"></a>
            </div>
        </div>
        <nav>
            <a href="javascript:" target="_blank">关于我们</a><i>|</i>
            <a href="javascript:" target="_blank">加入我们</a><i>|</i>
            <a href="javascript:" target="_blank">联系我们</a><i>|</i>
            <a href="javascript:" target="_blank">企业合作</a><i>|</i>
            <a href="apply.html" target="_blank">讲师合作</a><i>|</i>
            <a href="javascript:" target="_blank">帮助中心</a><i>|</i>
            <a href="javascript:" target="_blank">黑板报</a><i>|</i>
            <a href="javascript:" target="_blank">友情链接</a>
        </nav>
        <div class="copyright">Copyright © 2013-2018 jikexueyuan.com All Rights Reserved. 京ICP备11018032号 京公网安备11010802013056</div>
    </div>
    <div class="gotop" id="gototop">
        <span class="tel-icon">
            <div class="tel-number"></div>
        </span>
        <!-- <a class="service" href="javascript:void(0);" onclick="meiqia()"></a> -->
        <span class="wx">
            <div class="appewm"></div>
        </span>
        <span class="top"><i></i></span>
    </div>
</div>
<script type="text/javascript" src="js/login_register.min.js?t=1513326254000"></script>
<script>
    function gotop() {
        var html = $("#gototop");
        if ($(window).scrollTop() <= 0) {
            $("#gototop>.top>i").hide()
        }
        $("#gototop>.top").bind("click", function() {
            if ($(window).scrollTop() <= 0) {
                return false
            }
            $("body,html").animate({
                scrollTop: 0
            }, 200);
            return false
        });
        $(window).scroll(function() {
            if ($(window).scrollTop() > 0) {
                $("#gototop>.top>i").fadeIn()
            } else {
                $("#gototop>.top>i").fadeOut()
            }
        })
    }
    $(function() {
        gotop()
    });

</script>
<script type="text/javascript" src="js/meiqia.js?t=1513326254000"></script>
<script>
    new Vue({
        el: '#jk-header',
        data: {

        },
        created: function() {
            this.showUser();
        },
        methods: {
            showUser: function() { //通过cookie查询用户是否处于登陆状态
                var url = "user/queryByUsers";
                var str = this.getCookie("phone");
                var formData = new FormData();
                formData.append("phone", str)
                if (str != "") {
                    this.$http.post(url, formData).then(function(response) {
                        //console.log("data:" + response.data.u_phone);
                    	if (response.data.u_phone == undefined || response.data.u_phone == ""){
                        	$("#y-login").hide();
                            $("#n-login").show();
                        }else if (response.data.u_phone == str) {
                            $("#y-login").show(); //如果查询的用户账号与本地储存的值相等
                            $("#n-login").hide(); //则显示长在登录状态，否则显示离线状态
                            $("#userpoto").attr("src", response.data.u_photo);
                          //判断是否认证学院
                            if(response.data.u_stu_authentication != null){
                                $("#setting_ca").html("<a href='setting_ca.html' class=''>认证学员</a><i class='pro-icon'></i> <span></span>");
                            }else{
                                $("#setting_ca").html("<a href='setting_ca.html' class=''>认证学员</a><i class='nopro-icon'></i> <span></span>");
                            }
                        } else {
                            $("#y-login").hide();
                            $("#n-login").show();
                        }
                    });
                } else {
                    $("#y-login").hide();
                    $("#n-login").show();
                }             
            },
            getCookie: function(key) {
                var arr1 = document.cookie.split("; ");
                for (var i = 0; i < arr1.length; i++) {
                    var arr2 = arr1[i].split("="); //通过=截断，把name=Jack截断成[name,Jack]数组;
                    if (arr2[0] == key) {
                        return decodeURI(arr2[1]);
                    }
                }
            }
        }
    })

</script>

</html>
