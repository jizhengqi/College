<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>极客学院</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <title>账号设置_个人资料-极客学院</title>
    <link rel="stylesheet" type="text/css" href="css/index.min.css">
</head>

<body class="laydate_body">
    <script type="text/javascript" src="js/growingio.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/mask.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/jquery.min.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/header.min.js?t=1544581681296"></script>
    <script type="text/javascript" src="js/web_socket.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/websocket.js?t=1513326254000"></script>
    <script type="text/javascript" src="js/vue2.5.13.min.js"></script>
    <script type="text/javascript" src="js/axios0.18.0.min.js"></script>
    <script type="text/javascript" src="js/vue-resource.js"></script>

    <div id="header_top_notice"></div>
    <div id="jk-header">
        <div class="header">
            <h1>
                <a href="index.html" class="logo">
                    <img src="img/logo.png?t=1513326254000" width="100" alt="极客学院" />
                </a>
            </h1>
            <nav style="width:490px;">
                <ul>
                    <li>
                        <a href="index.html" class="home">首页</a>
                    </li>
                    <li class="careerpath">
                        <a href="//www.jikexueyuan.com/zhiye/">职业</a><i class="slide-icon"></i>
                        <div class="zhiye-submenu slide-submeu">
                            <strong>前端</strong>
                            <a href="//www.jikexueyuan.com/zhiye/web"><i class="web-icon"></i>Web前端工程师</a>
                            <a href="//www.jikexueyuan.com/zhiye/wechatapp"><i class="wx-icon"></i>微信小程序</a>
                            <strong>移动端</strong>
                            <a href="//www.jikexueyuan.com/zhiye/android"><i class="android-icon"></i>Android工程师</a>
                            <a href="//www.jikexueyuan.com/zhiye/ios"><i class="ios-icon"></i>iOS工程师</a>
                            <strong>后端</strong>
                            <a href="//www.jikexueyuan.com/zhiye/python"><i class="python-icon"></i>Python工程师</a>
                            <a href="//www.jikexueyuan.com/zhiye/php"><i class="php-icon"></i>PHP工程师</a>
                            <a href="//www.jikexueyuan.com/zhiye/go"><i class="golang-icon"></i>Golang工程师</a>
                            <a href="//www.jikexueyuan.com/zhiye/java"><i class="java-icon"></i>JavaWeb工程师</a>
                            <strong>大数据</strong>
                            <a href="//www.jikexueyuan.com/zhiye/bigdata"><i class="data-icon"></i>大数据平台研发工程师</a>
                            <strong>人工智能</strong>
                            <a href="//www.jikexueyuan.com/zhiye/ml"><i class="mlearning-icon"></i>机器学习工程师</a>
                            <strong>区块链</strong>
                            <a href="//www.jikexueyuan.com/zhiye/blockchain"><i class="yw-icon"></i>区块链工程师</a>
                            <!--<a href="#"><i class="yw-icon"></i>运维工程师</a>
								<a href="#"><i class="xmjl-icon"></i>项目经理</a>-->
                            <strong>设计</strong>
                            <a href="//www.jikexueyuan.com/zhiye/ux"><i class="ui-icon"></i>UI/UX设计师</a>
                        </div>
                    </li>
                    <li>
                        <a href="//www.jikexueyuan.com/course/">课程</a><i class="slide-icon"></i>
                        <div class="slide-submeu">
                            <a href="//www.jikexueyuan.com/course/">课程库</a>
                            <a href="//ke.jikexueyuan.com/zhiye/">职业路径</a>
                            <a href="//www.jikexueyuan.com/path/">知识体系图</a>
                            <a href="//ke.jikexueyuan.com/xilie/">系列课程</a>
                        </div>
                    </li>
                    <li>
                        <a href="//www.jikexueyuan.com/partner">企业</a><i class="slide-icon"></i>
                        <div class="slide-submeu qy-box">
                            <a href="//zt.jikexueyuan.com/microsoftai"><i class="wr-icon"></i>微软人工智能 </a>
                            <a href="//zt.jikexueyuan.com/baiduai"><i class="baidu-icon"></i>百度AI图像技术课</a>
                            <a href="//zt.jikexueyuan.com/aws"><i class="aws-icon"></i>AWS云计算</a>
                            <a href="//zt.jikexueyuan.com/qcloud"><i class="txy-icon"></i>腾讯云课程专区</a>
                            <a href="//zt.jikexueyuan.com/qualcomm"><i class="gt-icon"></i>Qualcomm公开课 </a>
                            <a href="//zt.jikexueyuan.com/b" class="youke-nav"><i class="youke-icon bounce"></i>企业合作新模式</a>
                        </div>
                    </li>
                    <li>
                        <a href="//wiki.jikexueyuan.com/">社区</a><i class="slide-icon"></i>
                        <div class="slide-submeu">
                            <a href="//wiki.jikexueyuan.com/">Wiki</a>
                            <a href="//wenda.jikexueyuan.com/">技术问答</a>
                            <!--<a href="//qun.jikexueyuan.com/">社群</a>
						<a href="//download.jikexueyuan.com/">资料下载</a>-->
                        </div>

                    </li>
                </ul>
            </nav>
            <div class="search">
                <input class="searchinput" id="searchinput" placeholder="搜索课程、问答或Wiki" />
                <span class="search-icon" id="search-bottom"></span>
                <div class="search-result">
                    <!-- <a href="javascript:;" class="search-hot">热门搜索 <span class="label label-green">职业课程</span></a>
				<a href="javascript:;">hello world <span class="label label-blue">知识图谱</span></a>
				<a href="javascript:;">hello world <span class="label label-purple">系列课程</span></a> -->
                </div>
            </div>
            <div class="nav-other">
                <div id="y-login">
                    <div class="centerbox" style="display: inline-block;">
                        <a href="ke_doing.html" class="learn-center" title="学习中心"></a>
                    </div>
                    <div class="centerbox" style="display: inline-block;">
                        <a href="" class="message" id="message" title="消息中心">
                            <i class="have" id="have" style="display: none;"></i>
                        </a>
                    </div>
                    <span class="userinfo-login" id="userinfo-login" style="display: inline-block;">
                        <a href="setting_user.html">
                            <img src="img/default.gif" id="userpoto">
                        </a>
                        <i id="uservip-icon"></i>
                        <div class="slide-submeu user-slide">
                            <a href="ke_doing.html"><i class="learningcenter-icon"></i>学习中心</a>
                            <a href="learn_center.html"><i class="homepage-icon"></i>个人主页</a>
                            <a href="setting_user.html"><i class="set-icon"></i>账号设置</a>
                            <a href="/logout"><i class="exit-icon"></i>退出登录</a>
                        </div>
                    </span>
                </div>
                <div id="n-login">
                    <span class="userinfo-notlogin">
                        <a href="Login.html">登录</a><i></i>
                        <a href="Register.html">注册</a>
                    </span>
                </div>
            </div>
        </div>
    </div>



    <div class="wrapper cf">
        <nav class="leftnav" id="leftNav">
            <ul>
                <li><a href="setting_user.html" class="active">个人资料</a></li>
                <li id="setting_ca">
                    <!--认证学员-->
                </li>
                <li><a href="setting_vip.html" class="">我的VIP</a></li>
                <!--<li><a href="setting_pro.html" class="">我的Pro</a></li>
                <li><a href="setting_order.html" class="">我的订单</a></li>-->
                <li><a href="setting_jkb.html" class="">我的极客币</a></li>
                <!--<li><a href="setting_quan.html" class="">我的优惠券</a></li>-->
                <li><a href="security.html" class="">账号安全</a></li>
                <li><a href="setting_message.html" class="">消息设置</a></li>
                <!--<li><a href="setting_sns.html" class="">绑定第三方账号</a></li>-->
            </ul>
        </nav>
        <div class="main">
            <h2>个人资料</h2>
            <section class="basic">
                <h3>基本信息</h3>
                <form id="basicForm" action="user/editUserName" method="get">
                    <ul>
                        <li>
                            <label for="">头像</label>
                            <div class="inputbox">
                                <div class="portrait-box"><img class="headpic" id="touxiang" src="img/default.gif">
                                    <p class="change" id="setPhoto"><span>修改</span></p>
                                </div>
                            </div>
                        </li>
                        <li>
                            <label for="uname">用户名</label>
                            <div class="inputbox">
                                <span class="username" id="username">jike_3801149</span>
                                <input type="text" id="uname" name="u_username" maxlength="30">
                                <span id="changeUsername">修改用户名</span>
                                <div class="changeuser-btns" id="changeuser-btns">
                                    <button class="confirm green-btn" id="unameSubBtn">确定</button>
                                    <button class="cancel cancel-btn" id="unameCanBtn">取消</button>
                                </div>
                                <span class="ex-tips username-tips" id="usernameTips">用户名作为在网站内的昵称显示，只可修改一次</span>
                                <input type="hidden" id="u_phone" name="u_phone">
                            </div>
                        </li>
                        <li>
                            <label for="truename">真实姓名</label>
                            <div class="inputbox">
                                <input type="text" id="truename" name="u_realname" value="jike_3801149" maxlength="30">
                                <span class="ex-tips">仅用户自己可见</span>
                            </div>
                        </li>
                        <li>
                            <label for="usex">性别</label>
                            <div class="inputbox">
                                <span class="select-box-sex">
                                    <select id="usex" name="u_sex">
                                        <option value="2">保密</option>
                                        <option value="1">男</option>
                                        <option value="0">女</option>
                                    </select>
                                </span>
                            </div>
                        </li>
                        <li>
                            <label for="calendar">生日</label>
                            <div class="inputbox">
                                <input id="calendar" class="laydate-icon" type="text" name="birthday" value="">
                            </div>
                        </li>
                        <li>
                            <label>现居住地</label>
                            <div class="inputbox">
                                <span class="select-box-home">
                                    <select class="select-home" id="proviceSel" data-value="18" onchange="changeCity()">
                                    </select>
                                </span>
                                <span class="select-box-home">
                                    <select class="select-home" id="citySel" data-value="278">
                                    </select>
                                </span>
                                <input id="truename" class="u_address" type="hidden" name="u_address">
                            </div>
                        </li>
                        <li>
                            <label for="">个人简介</label>
                            <div class="inputbox">
                                <textarea id="basArea" placeholder="一句话介绍一下自己吧，让别人更了解你" maxlength="200" name="u_intro"></textarea>
                                <p class="extra-tips">还可以输入 <span id="tipsNum">200</span> 字</p>
                            </div>
                        </li>
                    </ul>
                    <input type='hidden' name='stoken' id='stoken' value='f077e83c8391c66064754eb2349b8600' />
                    <button type="submit" class="green-btn" onclick="subUser()">保存</button>
                </form>
            </section>
            <!--
            <section class="zhiye">
                //<h3>职业信息</h3>
                <ul>
                    <li>
                        <label for="">职业状态</label>
                        <div class="status-pop">

                            <i class="career-icon"></i>
                            <span class="career-span">
                                在职 </span>
                            <i class="career-sel"></i>
                            <span class="careersel-span">
                                技术 | 1-2年 </span>
                            <span id="zyStatus" class="newPop">修改</span>
                        </div>
                    </li>
                    <li>
                        <label for="">职业方向</label>
                        <div class="dir-pop">

                            <ul id="direndUl">
                                <li>
                                    <span class="name">
                                        Java Web 工程师 </span>
                                    <ul class="cf">
                                        <li class='active'></li>
                                        <li class='active'></li>
                                        <li class='active'></li>
                                        <li></li>
                                    </ul>
                                    <span class="level">熟悉</span>
                                </li>
                            </ul>
                            <a id="zyDirection" class="newPop">修改</a>
                        </div>
                    </li>
                </ul>
            </section>
            <section class="domain">
                <h3>个性域名</h3>
                <div class="domain-area">
                    <label for="">我的个性域名</label>
                    <a class="domain-area-setup">设置个性域名</a><span class="domain-area-url">//my.jikexueyuan.com/<em id="sucDomain"></em></span>
                     <span class="domain-area-url">my.jikexueyuan.com/<em id="sucDomain"></em></span> 
                    <div class="domain-area-input" style="display: none">
                        <span class="pre">my.jikexueyuan.com/</span>
                        <input type="text" id="domainChange" maxlength="25" value="">
                        <span class="tip">支持小写英文字母/下划线/数字，25个字符以内，设定后不可修改</span>
                        <div class="btns">
                            <button class="confirm green-btn" id="domainBtn">确定</button>
                            <button class="cancel cancel-btn">取消</button>
                        </div>
                    </div>
                </div>
            </section>
-->
        </div>
        <!-- 修改头像 -->
        <div class="popup" style="display: none;position: absolute;left: 330px;top: 100px;background-color: aqua;border: 1px solid lightgray;z-index: 100;background-color: white;" id="setPhotos">
            <header>
                <h2>修改头像</h2>
                <i class="close popclose" id="popclose"></i>
            </header>
            <div class="wrap">
                <div class="bd" style="height: 90px;">
                    <input type="file" id="file" style="opacity: 0;width: 260px;height: 30px;" onchange="changeFile(this)">
                    <button id="showFileName" style="width: 260px;height: 32px;margin-left: -264px;border-radius: 5px;background-color: lightgray;">请选择图片</button>
                    <button type="button" id="upload" onclick="uploadPic()" class="green-btn" style="display: block;margin-top:18px;width: 80px;height: 30px;margin-left: 80px;">上传</button>
                </div>
            </div>
        </div>
        <div id="backgroundColor" style="position: fixed;width: 100%;height: 1000px;color: black;left: 0px;top: 0px;z-index: 99;display: block;background-color: black;opacity: 0.1;display: none"></div>

        <!-- /setPhotoPop -->
        <!--<div class="popup" id="statusPop" style="display: none;">
            <header>
                <h2>添加职业状态</h2>
                <i class="close popclose"></i>
            </header>
            <div class="wrap">
                <h3>请选择您当前的职业状态：</h3>
                <ul class="status-ul cf" id="statusBtns">
                    <li data-value='1'>学生</li>
                    <li data-value='2'>在职</li>
                    <li data-value='3'>待业</li>
                </ul>
                <div class="status-selects" style="display: none;">
                    <span><select id="select-one"></select></span>
                    <span><select id="select-two"></select></span>
                </div>
                <div class="status-btns">
                    <button class="confirm gray-btn" id="zhiyeSub">确定</button>
                    <button class="cancel cancel-btn popclose">取消</button>
                </div>
            </div>
        </div>
        <div class="popup" id="directionPopone" style="display: none;">
            <header>
                <h2>添加感兴趣的职业方向（1/2）</h2>
                <i class="close popclose"></i>
            </header>
            <div class="wrap part1">
                <h3>请选择你感兴趣的职业方向（最多可选择3个）</h3>
                <ul id="directionUl" class="cf">
                </ul>
                <div class="direction-btns cf">
                    <button class="confirm gray-btn" id="dirSubbtn1">确定</button>
                    <button class="cancel cancel-btn popclose">取消</button>
                </div>
            </div>
        </div>
        <div class="popup" id="directionPoptwo" style="display: none;">
            <header>
                <h2>添加感兴趣的职业方向（2/2）</h2>
                <i class="close popclose"></i>
            </header>
            <div class="wrap part2">
                <h3>您在这些方向上当前的水平如何？</h3>
                <ul id="dirlevelUl">
                </ul>
                <div class="direction-btns cf">
                    <button class="confirm gray-btn" id="dirSubbtn2">确定</button>
                    <button class="cancel cancel-btn popclose">取消</button>
                </div>
            </div>
        </div>-->
    </div>
</body>


<script>
    window.IS_SELF = 0;

</script>
<!-- 生日 -->
<script src="js/laydate.js"></script>
<!-- 头像 -->
<script src="js/swfobject.js"></script>
<script src="js/fullAvatarEditor.js"></script>

<script src="js/popup.js"></script>
<script src="js/index.js?t=20170302"></script>
<script src="js/common.js"></script>
<!--引入省市级联-->
<script src="json/area.json"></script>

<link rel="stylesheet" href="css/footer.css?t=1513326254000" />
<div id="footer">
    <div class="footer-content">
        <div class="contact-way">
            <div class="other-way">
                <a href="//blog.jikexueyuan.com/28.html " target="_blank" class="weixin-icon"></a>
                <!--<a href="" class="tencen-icon"></a>-->
                <a href="//weibo.com/jikexueyuan" target="_blank" class="sina-icon"></a>
                <a href="//twitter.com/jikexueyuan" target="_blank" class="facebook-icon"></a>
                <a href="//plus.google.com/communities/117673330839635588089" target="_blank" class="google-icon"></a>
            </div>
        </div>
        <nav>
            <a href="javascript:" target="_blank">关于我们</a><i>|</i>
            <a href="javascript:" target="_blank">加入我们</a><i>|</i>
            <a href="javascript:" target="_blank">联系我们</a><i>|</i>
            <a href="javascript:" target="_blank">企业合作</a><i>|</i>
            <a href="apply.html" target="_blank">讲师合作</a><i>|</i>
            <a href="javascript:" target="_blank">帮助中心</a><i>|</i>
            <a href="javascript:" target="_blank">黑板报</a><i>|</i>
            <a href="javascript:" target="_blank">友情链接</a>
        </nav>
        <div class="copyright">Copyright © 2013-2018 jikexueyuan.com All Rights Reserved. 京ICP备11018032号 京公网安备11010802013056</div>
    </div>
    <div class="gotop" id="gototop">
        <span class="tel-icon">
            <div class="tel-number"></div>
        </span>
        <!-- <a class="service" href="javascript:void(0);" onclick="meiqia()"></a> -->
        <span class="wx">
            <div class="appewm"></div>
        </span>
        <span class="top"><i></i></span>
    </div>
</div>
<script type="text/javascript" src="js/login_register.min.js?t=1513326254000"></script>
<script>
    function gotop() {
        var html = $("#gototop");
        if ($(window).scrollTop() <= 0) {
            $("#gototop>.top>i").hide()
        }
        $("#gototop>.top").bind("click", function() {
            if ($(window).scrollTop() <= 0) {
                return false
            }
            $("body,html").animate({
                scrollTop: 0
            }, 200);
            return false
        });
        $(window).scroll(function() {
            if ($(window).scrollTop() > 0) {
                $("#gototop>.top>i").fadeIn()
            } else {
                $("#gototop>.top>i").fadeOut()
            }
        })
    }
    $(function() {
        gotop()
    });

</script>
<script type="text/javascript" src="js/meiqia.js?t=1513326254000"></script>
<link type="text/css" href="css/nc.css?t=20170228" disabled="">
<script type="text/javascript" src="js/nc.js?t=20170228"></script>
<script>
    new Vue({
        el: '#jk-header',
        data: {

        },
        created: function() {
            this.showUser();
        },
        methods: {
            showUser: function() { //通过cookie查询用户是否处于登陆状态
                var url = "user/queryByUsers";
                var str = this.getCookie("phone");
                $("#u_phone").val(str);
                var formData = new FormData();
                formData.append("phone", str)
                if (str != "") {
                    this.$http.post(url, formData).then(function(response) {
                        //console.log("data:" + response.data.u_phone);
                        if (response.data.u_phone == str) {
                            $("#y-login").show(); //如果查询的用户账号与本地储存的值相等
                            $("#n-login").hide(); //则显示长在登录状态，否则显示离线状态
                            $("#touxiang").attr("src", response.data.u_photo);
                            $("#userpoto").attr("src", response.data.u_photo);
                            $("#username").html(response.data.u_username);
                            $("#uname").val(response.data.u_username);
                            $("#truename").val(response.data.u_realname);
                            $("#usex").val(response.data.u_sex);
                            var dateStr = response.data.u_birthday;
                            var dateee = new Date(dateStr).toJSON();
                            var date = new Date(+new Date(dateee) + 8 * 3600 * 1000).toISOString().replace(/T/g, ' ').replace(/\.[\d]{3}Z/, '');
                            $("#calendar").val(date.substr(0,10));
                            $("#basArea").val(response.data.u_intro);
                            if (response.data.u_address != "") {
                                var strs = response.data.u_address.split(" ");
                                this.onloads(strs[0]);
                                this.setCity(strs[0], strs[1]);
                            }else{
                                this.onloads("北京市");
                                this.setCity("北京市", "北京市");
                            }
                            //判断是否认证学院
                            if(response.data.u_stu_authentication != null){
                                $("#setting_ca").html("<a href='setting_ca.html' class=''>认证学员</a><i class='pro-icon'></i> <span></span>");
                            }else{
                                $("#setting_ca").html("<a href='setting_ca.html' class=''>认证学员</a><i class='nopro-icon'></i> <span></span>");
                            }
                        } else {
                            $("#y-login").hide();
                            $("#n-login").show();
                        }
                    });
                } else {
                    $("#y-login").hide();
                    $("#n-login").show();
                }
            },
            getCookie: function(key) {
                var arr1 = document.cookie.split("; ");
                for (var i = 0; i < arr1.length; i++) {
                    var arr2 = arr1[i].split("="); //通过=截断，把name=Jack截断成[name,Jack]数组;
                    if (arr2[0] == key) {
                        return decodeURI(arr2[1]);
                    }
                }
            },
            onloads: function(txt) { //这个方法用来给省份的select赋值
                //获取json格式之后转化为数组
                var json_array = eval(json);
                var prov = document.getElementById("proviceSel");
                for (var i = 0; i < json_array.provinces.length; i++) {
                    var json_p = json_array.provinces[i].provinceName;
                    var option = new Option(json_p, json_p);
                    if (json_p == txt) {
                        option.selected = true;
                    }
                    prov.add(option, null);
                }
            },
            setCity: function(prov, txt) {
                var city = document.getElementById("citySel");
                //获取json格式之后转化为数组
                var json_array = eval(json);
                city.options.length = 0; //清空城市
                for (var i = 0; i < json_array.provinces.length; i++) {
                    var json_p = json_array.provinces[i].provinceName;
                    if (json_p == prov) {
                        var citys = json_array.provinces[i].citys;
                        for (var j = 0; j < citys.length; j++) {
                            var json_c = citys[j].citysName;
                            var option = new Option(json_c, json_c);
                            if (json_c == txt) {
                                option.selected = true;
                            }
                            city.add(option, null);
                        }
                        break;
                    }
                }
            },
            dateFtt: function(fmt, date) { //author: meizz   
                var o = {
                    "M+": date.getMonth() + 1, //月份   
                    "d+": date.getDate(), //日   
                    "h+": date.getHours(), //小时   
                    "m+": date.getMinutes(), //分   
                    "s+": date.getSeconds(), //秒   
                    "q+": Math.floor((date.getMonth() + 3) / 3), //季度   
                    "S": date.getMilliseconds() //毫秒   
                };
                if (/(y+)/.test(fmt))
                    fmt = fmt.replace(RegExp.$1, (date.getFullYear() + "").substr(4 - RegExp.$1.length));
                for (var k in o)
                    if (new RegExp("(" + k + ")").test(fmt))
                        fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
                return fmt;
            }
        }
    });
    //点击修改用户名按钮，将用户名赋值进文本框，确定取消按钮出现，准备修改用户名
    $("#changeUsername").click(function() {
        $("#changeuser-btns").css("display", "inline-block");
        $("#changeUsername").hide();
        $("#username").hide();
        $("#uname").val($("#username").html()).show();
        $("#usernameTips").show();
    });
    //修改用户名的取消按钮，恢复原来样式
    $("#unameCanBtn").click(function() {
        $("#changeuser-btns").hide();
        $("#changeUsername").show();
        $("#username").show();
        $("#uname").val($("#username").html()).hide();
        $("#usernameTips").hide();
    });
    //确定按钮，开始修改用户名
    $("#unameSubBtn").click(function() {
        var formData = new FormData();
        formData.append('username', $("#uname").val());
        formData.append("phone", getCookie("phone"))
        //将省市信息添加进要提交的信息中
        $(".u_address").val($("#proviceSel").val() + " " + $("#citySel").val());
    });

    //保存用户信息
    function subUser() {
        $(".u_address").val($("#proviceSel").val() + " " + $("#citySel").val());
    }

    //点击修改头像，出现遮罩层，和弹框
    $("#setPhoto").click(function() {
        $("#setPhotos").show();
        $("#backgroundColor").show();
    });
    //取消修改头像，关闭遮罩层和弹窗
    $("#popclose").click(function() {
        $("#setPhotos").hide();
        $("#backgroundColor").hide();
    });
    //开始修改头像
    function uploadPic() {
        if ($("#showFileName").html() == "请选择图片") {
            return;
        }
        var formData = new FormData();
        formData.append('file', $("#file")[0].files[0]);
        formData.append("phone", getCookie("phone"));
        $.ajax({
            url: 'user/uploadPic',
            data: formData,
            type: 'post',
            datatype: 'json',
            contentType: false, //不设置内容类型
            cache: false, //上传文件无需缓存
            processData: false, //不处理数据
            success: function(data) {
                if (data.length > 6) {
                    $("#setPhotos").hide(); //隐藏文件上传DIV
                    $("#backgroundColor").hide(); //隐藏遮罩层
                    window.location.reload(); //刷新本页面
                }
            }
        });
    }

    //获取文本框获取的文件名
    function changeFile(obj) {
        $("#showFileName").html($(obj)[0].files[0].name);
    }

    //获取本地储存的cookie值
    function getCookie(key) {
        var arr1 = document.cookie.split("; ");
        for (var i = 0; i < arr1.length; i++) {
            var arr2 = arr1[i].split("="); //通过=截断，把name=Jack截断成[name,Jack]数组;
            if (arr2[0] == key) {
                return decodeURI(arr2[1]);
            }
        }
    }
    //个人介绍字数实时监控
    $('#basArea').bind('input propertychange', function() {
        $(this).next().children().html(200 - $(this).val().length);
    });

    function changeCity() { //这个方法就是实现省市级联的核心方法，也是用来给市的select赋值
        //获取当前选中的省份prov.value;
        var provValue = document.getElementById("proviceSel").value;
        var city = document.getElementById("citySel");
        //获取json格式之后转化为数组
        var json_array = eval(json);
        city.options.length = 0; //清空城市
        for (var i = 0; i < json_array.provinces.length; i++) {
            var json_p = json_array.provinces[i].provinceName;
            if (provValue == json_p) {
                var citys = json_array.provinces[i].citys;
                for (var j = 0; j < citys.length; j++) {
                    var json_c = citys[j].citysName;
                    city.add(new Option(json_c, json_c), null);
                }
                break;
            }
        }
    }

</script>

</html>
